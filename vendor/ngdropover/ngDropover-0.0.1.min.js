!function(a,b){"use strict";angular.module("ngDropover",[]).run(function(a,b){a.on("click",function(a){a.fromDocument=!0,b.$emit("ngDropover.closeAll",a)})}).constant("ngDropoverConfig",{offsetX:0,offsetY:0,wrapperClass:"",closeOthersOnOpen:!0,trigger:"",triggerEvent:"click",position:"bottom",closeOnClickOff:!0}).factory("triggerHelper",function(){var a={mouseenter:"mouseleave",click:"click",focus:"blur"};return{getTriggers:function(b){var c=b,d=a[c]||c;return"hover"===b?{show:"mouseenter",hide:"mouseleave"}:{show:c,hide:d}}}}).directive("ngDropover",function(a,c,d,e,f,g,h,i){return{restrict:"A",replace:!0,scope:{target:"@ngDropover",ngDropoverOptions:"@ngDropoverOptions"},link:function(c,e,g){function j(){c.config=angular.extend({},a,c.$eval(c.ngDropoverOptions)),k(),s={toggle:function(a){a.ngDropoverId||(a.ngDropoverId=c.ngDropoverId,c.toggle(c.ngDropoverId))},open:function(a){a.ngDropoverId=c.ngDropoverId,c.isOpen||c.open(c.ngDropoverId)},close:function(a){a.ngDropoverId=c.ngDropoverId,c.isOpen&&c.close(c.ngDropoverId)},markEvent:function(a){a.ngDropoverId=c.ngDropoverId}},c.$watch("ngDropoverOptions",function(){m(),c.config=angular.extend({},a,c.$eval(c.ngDropoverOptions)),l()},!0),l()}function k(){q=o(),e.addClass(c.config.wrapperClass),q.css({position:"absolute",visibility:"hidden"}).addClass("ng-dropover-contents"),q.on("click",function(a){a.ngDropoverId=c.ngDropoverId})}function l(){r=e,""!==c.config.trigger&&(r=angular.element(b.querySelector(c.config.trigger))),r.addClass("ng-dropover-trigger");var a=i.getTriggers(c.config.triggerEvent);a.show===a.hide?r.on(a.show,s.toggle):(r.on(a.show,s.open),r.on(a.hide,s.close),r.on("click",s.markEvent))}function m(){var a=i.getTriggers(c.config.triggerEvent);a.show===a.hide?r.off(a.show,s.toggle):(r.off(a.show,s.open),r.off(a.hide,s.close),r.off("click",s.markEvent))}function n(){var a=f.positionElements(e,q,c.config.position,!1),b=parseInt(c.config.offsetX,10)||0,d=parseInt(c.config.offsetY,10)||0;q.css("left",a.left+b+"px"),q.css("top",a.top+d+"px")}function o(){var a;return e[0].querySelector("[ng-dropover-contents]")?a=angular.element(e[0].querySelector("[ng-dropover-contents]")):angular.element("<div class='ng-dropover-empty'>Oops, you forgot to specify what goes in the dropdown</div>")}function p(){q.css("visibility","hidden"),d.$broadcast("ngDropover.closing",c.ngDropoverId),d.$broadcast("ngDropover.closed",c.ngDropoverId),e.removeClass("ng-dropover-open"),c.isOpen=!1,angular.element(h).unbind("resize",n)}var q,r,s;j(),c.open=function(a){a!==c.ngDropoverId||c.isOpen||(n(),q.css("visibility","visible"),d.$broadcast("ngDropover.opening",c.ngDropoverId),d.$broadcast("ngDropover.opened",c.ngDropoverId),e.addClass("ng-dropover-open"),d.$broadcast("ngDropover.rendered",c.ngDropoverId),angular.element(h).bind("resize",n),c.isOpen=!0)},c.close=function(a){a===c.ngDropoverId&&c.isOpen&&p()},c.toggle=function(a){c.isOpen?c.close(a):c.open(a)},c.closeAll=function(){c.isOpen&&p()},c.$on("$destroy",function(){m(),angular.element(h).unbind("resize",n)})},controller:["$scope","$element","$attrs",function(a,b,c){a.isOpen=!1,a.ngDropoverId=a.target||a.$id,a.openListener=d.$on("ngDropover.open",function(b,c){a.open(c.ngDropoverId)}),a.closeListener=d.$on("ngDropover.close",function(b,c){a.close(c.ngDropoverId)}),a.closeAllListener=d.$on("ngDropover.closeAll",function(b,c){c.ngDropoverId===a.ngDropoverId||a.config.closeOnClickOff&&a.closeAll()}),a.toggleListener=d.$on("ngDropover.toggle",function(b,c){a.isOpen?a.close(c.ngDropoverId):a.open(c.ngDropoverId)}),a.$on("$destroy",function(){a.openListener(),a.openListener=null,a.closeListener(),a.closeListener=null,a.closeAllListener(),a.closeAllListener=null,a.toggleListener(),scope.toggleListener=null})}]}}).directive("ngDropoverTrigger",function(a,b,c){return{restrict:"AE",link:function(a,b,d){var e=a.$eval(d.ngDropoverTrigger),f=c.getTriggers(e.triggerEvent||"click");b.addClass("ng-dropover-trigger"),"open"===e.action||"close"===e.action?b.on(f.show,function(b){b.ngDropoverId=e.ngDropoverId,a.$emit("ngDropover."+e.action,b)}):f.show===f.hide?b.on(f.show,function(b){b.ngDropoverId=e.ngDropoverId,a.$emit("ngDropover.toggle",b)}):(b.on(f.show,function(b){b.ngDropoverId=e.ngDropoverId,a.$emit("ngDropover.open",b)}),b.on(f.hide,function(b){b.ngDropoverId=e.ngDropoverId,a.$emit("ngDropover.close",b)})),b.on("click",function(a){a.ngDropoverId=e.ngDropoverId})}}}).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},f=e(b[0]);f!==a[0]&&(d=this.offset(angular.element(f)),d.top+=f.clientTop-f.scrollTop,d.left+=f.clientLeft-f.scrollLeft);var g=b[0].getBoundingClientRect();return{width:g.width||b.prop("offsetWidth"),height:g.height||b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:d.width||c.prop("offsetWidth"),height:d.height||c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].documentElement.scrollLeft)}},positionElements:function(a,b,c,d){var e,f,g,h,i=c.split("-"),j=i[0],k=i[1]||"center";e=d?this.offset(a):this.position(a),f=b.prop("offsetWidth"),g=b.prop("offsetHeight");var l={center:function(){return e.left+e.width/2-f/2},left:function(){return e.left},right:function(){return e.left+e.width}},m={center:function(){return e.top+e.height/2-g/2},top:function(){return e.top},bottom:function(){return e.top+e.height}};switch(j){case"right":h={top:m[k](),left:l[j]()};break;case"left":h={top:m[k](),left:e.left-f};break;case"bottom":h={top:m[j](),left:l[k]()};break;default:h={top:e.top-g,left:l[k]()}}return h}}}])}(window,document);